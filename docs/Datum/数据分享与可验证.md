## 数据分享与可验证

### 简介

- **数据分享**是指用户通过支付NFT获取数据提供方提供的数据（文件），用于多方计算等操作；

- **数据可验证**是指用户在获取数据前，对数据的访问进行**权限验证**，获取数据后，对数据进行**完整性验证**；

  > 下载数据前进行权限验证，如果验证失败，则获取数据失败；下载完成之后自动进行完整性验证，如果验证失败，自动退回NFT，获取数据失败；

### 数据分享

数据分享过程中根据数据存储的方式，支持：

- 托管存储方式，即将数据托管到第三方存储服务器上，如官网的云服务器；
- 本地存储方式，即将数据保存到数据提供方本地的服务器上，要求用户需要提供可供下载的文件服务器；


#### 托管存储方式

###### 流程说明

  - 数据提供方将数据托管到第三方云服务器上，然后发行对应的NFT，并在NFT交易市场流通；

  - 用户从NFT交易市场搜索并购买对应的NFT（NFT属性中包含计算数据后的hash）；
  - 用户在界面上点击获取数据按钮，跳转到支付界面；
  - 用户选择并支付对应的NFT，向托管服务器发起下载请求；
  - 托管服务器响应用户的下载请求，进行下载权限验证，并验证NFT属性中的信息；
  - 验证下载数据，如果验证成功后，下载数据成功并支付NFT成功；否则下载数据失败，并退回NFT给用户；

###### 接口说明（API）



#### 本地存储方式

###### 流程说明

  - 数据提供方将数据放到本地文件服务器上，然后发行对应的NFT，并在NFT交易市场流通；
  - 数据提供方向官网服务器提供数据服务凭证（如：数据提供方文件服务器地址，数据文件名称等）；
  - 用户从NFT交易市场搜索并购买对应的NFT（NFT属性中包含计算数据后的hash）；
  - 用户在界面上点击获取数据按钮，跳转到支付界面；
  - 用户选择并支付对应的NFT，向官网服务器发起下载请求；
  - 官网服务器根据请求转发给对应的数据提供方文件服务器；
  - 数据提供方文件服务器响应下载请求，进行下载权限验证，并验证NFT属性中的信息；
  - 验证下载数据，如果验证成功后，下载数据成功并支付NFT成功；否则下载数据失败，并退回NFT给用户；
  
###### 接口说明（API）



### 数据可验证

为了数据的安全性，数据在下载之前需要进行请求进行**权限验证**；为了数据的完整性和保护用户的权益，数据在下载完成之后，必须对数据进行完整性验证；


#### 权限验证

###### 流程说明

  - 用户支付NFT并发起下载请求；
  - 文件服务器验证请求参数，对支付的NFT进行鉴权验证；
  - 如果验证通过，则允许下载，否则返回下载失败；

###### 接口说明（API）



#### 数据完整性验证

###### 流程说明

  - 下载数据完成后，对数据文件进行计算处理得出校验值（hash计算）；
  - 获取对应NFT属性中的校验值和计算出的校验值执行进行比较；
  - 如果校验值相同，则下载成功，将对应的NFT转给数据提供方；否则将NFT退回给用户；

###### 接口说明（API）

