---
sidebar_position: 2
---

# 两方数据合作

数据合作的两方，一个是查询方，一个是被查询方。

### 隐私匹配

**主要功能**

查询方与被查询方能计算得到双方数据的交集，但互相不暴露交集以外的数据集的任何信息。它使用隐私求交集技术（Private Set Intersection），支持DH和HE两种算法实现。

**常用场景**

黑名单查询，白名单查询，通讯录好友发现，联合计算样本对齐。

**接口说明（API）**

+ 接口名称：runPSITask

+ 请求【POST】

  ```json
  {
  	"algo_type": "DH",
  	"requester": {
          "name": "orgA",
          "data_path": "/path/to/data",
          "data_type": "csv",
          "key_column": "id_col"
  	},
  	"provider": {
          "name": "orgB",
          "data_path": "/path/to/data",
          "data_type": "csv",
          "key_column": "id_col"
      },
  	"result_recv_type": 1
  }
  ```
  
  参数说明
  
  | 参数             | 类型   | 说明                         | 是否必须 |
| ---------------- | ------ | ---------------------------- | -------- |
  | algo_type        | string | 使用的算法的类型，支持DH，HE | Y        |
| requester        | json   | 查询方信息                   | Y        |
  | name             | string | 组织名称                     | Y        |
  | data_path        | string | 数据所在路径                 | Y        |
  | data_type        | string | 数据的格式                   | Y        |
  | key_column       | string | 所需操作的列                 | Y        |
  | provider         | json   | 被查询方信息                 | Y        |
  | result_recv_type | int    | 结果接收类型，1-单方，2-双方 | Y        |
  
+ 响应

  ```json
  {
  	"status": 200,
  	"result":{
  		"path": "/path/to/result/file",
  		"type": "csv",
  		"extra": ""
  	},
  	"msg": "success"
  }
  ```

  参数说明

  | 参数   | 类型   | 说明                                                       |
  | ------ | ------ | ---------------------------------------------------------- |
  | status | int    | 响应状态，<br />200-成功，400-无效请求，500-服务器内部错误 |
  | result | json   | 结果信息                                                   |
  | path   | string | 结果所在路径                                               |
  | type   | string | 结果的类型                                                 |
  | extra  | string | 关于结果的额外信息                                         |
  | msg    | string | 成功信息或错误的描述                                       |

  
  
+ 接口名称：getDataProviders

+ 请求【GET】

  无

+ 响应

  ```json
  {
  	"status": 200,
  	"result":{
  		"data_providers": ["orgA", "orgB", "orgC"]
  	},
  	"msg": "success"
  }
  ```

  参数说明

  | 参数           | 类型   | 说明                                                 |
  | -------------- | ------ | ---------------------------------------------------- |
  | status         | int    | 响应状态，200-成功，400-无效请求，500-服务器内部错误 |
  | result         | json   | 结果信息                                             |
  | data_providers | list   | 所有数据提供方组织名称                               |
  | msg            | string | 成功信息或错误的描述                                 |



+ 接口名称：getDataPath

+ 请求【GET】

  | 参数          | 类型   | 说明               | 是否必须 |
  | ------------- | ------ | ------------------ | -------- |
  | data_provider | string | 数据提供方组织名称 | Y        |

+ 响应

  ```json
  {
  	"status": 200,
  	"result":{
  		"data_path": ["/path/to/data1", "/path/to/data2", "/path/to/data3"]
  	},
  	"msg": "success"
  }
  ```

  参数说明

  | 参数      | 类型   | 说明                                                 |
  | --------- | ------ | ---------------------------------------------------- |
  | status    | int    | 响应状态，200-成功，400-无效请求，500-服务器内部错误 |
  | result    | json   | 结果信息                                             |
  | data_path | string | 数据所在路径                                         |
  | msg       | string | 成功信息或错误的描述                                 |



+ 接口名称：getDataType

+ 请求【GET】

  | 参数          | 类型   | 说明               | 是否必须 |
  | ------------- | ------ | ------------------ | -------- |
  | data_provider | string | 数据提供方组织名称 | Y        |
  | data_path     | string | 数据所在路径       | Y        |

+ 响应

  ```json
  {
  	"status": 200,
  	"result":{
  		"data_type": "csv"
  	},
  	"msg": "success"
  }
  ```

  参数说明

  | 参数      | 类型   | 说明                                                 |
  | --------- | ------ | ---------------------------------------------------- |
  | status    | int    | 响应状态，200-成功，400-无效请求，500-服务器内部错误 |
  | result    | json   | 结果信息                                             |
  | data_type | string | 数据的格式                                           |
  | msg       | string | 成功信息或错误的描述                                 |



+ 接口名称：getDataColumnsName

+ 请求【GET】

  | 参数          | 类型   | 说明               | 是否必须 |
  | ------------- | ------ | ------------------ | -------- |
  | data_provider | string | 数据提供方组织名称 | Y        |
  | data_path     | string | 数据所在路径       | Y        |
  | data_type     | string | 数据的格式         | Y        |

+ 响应

  ```json
  {
  	"status": 200,
  	"result":{
  		"columns_name": ["col1", "col2"]
  	},
  	"msg": "success"
  }
  ```

  参数说明

  | 参数         | 类型   | 说明                                                 |
  | ------------ | ------ | ---------------------------------------------------- |
  | status       | int    | 响应状态，200-成功，400-无效请求，500-服务器内部错误 |
  | result       | json   | 结果信息                                             |
  | columns_name | list   | 数据的所有列名                                       |
  | msg          | string | 成功信息或错误的描述                                 |






### 隐私标签查询

**主要功能**

在查询方不泄露查询的内容，且被查询方不泄露交集以外的数据的前提下，查询方能获取双方数据的交集及交集对应的标签数据。它使用基于标签的隐私求交集技术（Labeled Private Set Intersection），支持DH和HE两种算法实现。

**常用场景**

数据集特征补充，数据集缺省值补齐。

**接口说明（API）**

+ 接口名称：runLabeledPSITask

+ 请求【POST】

  ```json
  {
  	"algo_type": "DH",
  	"requester": {
          "name": "orgA",
          "data_path": "/path/to/data",
          "data_type": "csv",
          "key_column": "id_col"
  	},
  	"provider": {
          "name": "orgB",
          "data_path": "/path/to/data",
          "data_type": "csv",
          "key_column": "id_col",
          "selected_columns": ["col1", "col2"]
      }
  }
  ```

  参数说明

  | 参数             | 类型   | 说明                         | 是否必须 |
  | ---------------- | ------ | ---------------------------- | -------- |
  | algo_type        | string | 使用的算法的类型，支持DH，HE | Y        |
  | requester        | json   | 查询方信息                   | Y        |
  | name             | string | 组织名称                     | Y        |
  | data_path        | string | 数据所在路径                 | Y        |
  | data_type        | string | 数据的格式                   | Y        |
  | key_column       | string | 所需操作的列                 | Y        |
  | provider         | json   | 被查询方信息                 | Y        |
  | selected_columns | list   | 所需查询的label列名          | Y        |

  

+ 响应

  ```json
  {
  	"status": 200,
  	"result":{
  		"path": "/path/to/result/file",
  		"type": "csv",
  		"extra": ""
  	},
  	"msg": "success"
  }
  ```

  参数说明

  | 参数   | 类型   | 说明                                                       |
  | ------ | ------ | ---------------------------------------------------------- |
  | status | int    | 响应状态，<br />200-成功，400-无效请求，500-服务器内部错误 |
  | result | json   | 结果信息                                                   |
  | path   | string | 结果所在路径                                               |
  | type   | string | 结果的类型                                                 |
  | extra  | string | 关于结果的额外信息                                         |
  | msg    | string | 成功信息或错误的描述                                       |

  



### 隐私SQL查询

**主要功能**

在查询方不泄露查询的内容，且被查询方不泄露查询结果以外的数据库数据的前提下，查询方能使用SQL查询语句获得正确的查询结果。它支持基于MPC的隐私查询和基于同态加密(HE)的隐私查询。

**接口说明（API）**

+ 接口名称：runPrivacySQLTask

+ 请求【POST】

  ```json
  {
  	"algo_type": "MPC",
  	"requester": {
          "name": "orgA",
          "data_path": "/path/to/data",
          "data_type": "csv"
  	},
  	"provider": {
          "name": "orgB",
          "data_path": "/path/to/data",
          "data_type": "csv"
      },
  	"sql": "select sum(col1) from orgB;"
  }
  ```

  参数说明

  | 参数      | 类型   | 说明                        | 是否必须 |
  | --------- | ------ | --------------------------- | -------- |
  | algo_type | string | 使用的算法类型，支持MPC，HE | Y        |
  | requester | json   | 查询方信息                  | Y        |
  | name      | string | 组织名称                    | Y        |
  | data_path | string | 数据所在路径                | Y        |
  | data_type | string | 数据的格式                  | Y        |
  | sql       | string | sql语句                     | Y        |
  | provider  | json   | 被查询方信息                | Y        |

  

+ 响应

  ```json
  {
  	"status": 200,
  	"result":{
  		"path": "/path/to/result/file",
  		"type": "csv",
  		"extra": ""
  	},
  	"msg": "success"
  }
  ```

  参数说明

  | 参数   | 类型   | 说明                                                       |
  | ------ | ------ | ---------------------------------------------------------- |
  | status | int    | 响应状态，<br />200-成功，400-无效请求，500-服务器内部错误 |
  | result | json   | 结果信息                                                   |
  | path   | string | 结果所在路径                                               |
  | type   | string | 结果的类型                                                 |
  | extra  | string | 关于结果的额外信息                                         |
  | msg    | string | 成功信息或错误的描述                                       |

  

