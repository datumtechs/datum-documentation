# 数据采集与传输


数据从web2进入web3的起点，是能够被合理的采集和传输到web3能够触达的环境中。Datum将提供一系列服务API，使用户能以合适的方式采集并传输数据。Datum将作为服务商为用户解决数据采集与传输环节的各类解决方案，包括：数据对接、数据上传、数据存储管理。并作为可信任的托管服务商，使得用户能够方便的实现web3模式下的数据资产化、数据检索、数据使用服务。用户拥有对数据的完全掌控，可以按需选择适用的API。

  

## 支持的传输模式


- 云服务传输，数据集中托管
- IPFS传输，数据分布式管理
- 区块链传输，数据共识管理



### 云服务传输

Datum提供多种云服务资源，用户可注册后上传原始数据。

#### 使用场景

- 将自己本地的原始数据上传到Datum，并选择Datum提供的云服务器托管原始数据。  

#### 功能描述


- 将用户的原始数据到由Datum提供的云服务器上托管，使得用户的原始数据通过Datum接入Web3方便后续对数据进行资产化、数据检索、数据使用等服务。


#### 如何使用


- 接口名称：`uploadData`

- 请求方式: `POST`

- 请求数据类型: `multipart/form-data`

- 响应数据类型: `*/*`


- 请求参数：


|名称|类型|说明|是否必填|
|---|---|---|---|
|file|string|文件|Y| 
|storageType|int|存储方式(0： 本地存储； 1： 云存储； 2： IPFS存储； 3： 区块链存储)|Y|
|storageOption|string|json格式的字符串表示存储方式的选项，和storageType搭配使用[查看](#storageOption值说明)|Y|


- 响应状态:


|状态码| 说明 |
|---|---|---| 
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|json|上传后的摘要信息|Y|
|originId|string|上传后的原始数据的originId,代表该原始数据在Datum中的唯一标识|Y|
|hash|string|上传后的原始数据内容Hash|Y|
|msg|string|响应描述|Y|



- 响应示例:

  ```json
  {
      "status": 200,
      "result": {
        "originId": "0xdadad...454545",
        "hash": "295e5ae656d084dfda86c4ef7c38719ee1fb650899ec66d15d543b30c8f45b87"
      },
      "msg": "OK"
  }
  ```


- 使用示例

```shell
curl 'https://datum.io/api/v2/data/uploadData' \
     -H 'Accept: application/json, text/plain, */*' \
     -H 'Accept-Language: zh-CN,zh;q=0.9' \
     -H 'Connection: keep-alive' \
     -H 'Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryml6aYqp5NPR1V6C9' \
     -H 'Origin: http://datum.io' \
     --data-raw $'------WebKitFormBoundaryml6aYqp5NPR1V6C9\r\nContent-Disposition: form-data; name="file"; filename="服务清单.xlsx"\r\nContent-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\r\n\r   \n\r\n------WebKitFormBoundaryml6aYqp5NPR1V6C9\r\nContent-Disposition: form-data; name="storageType"\r\n\r\n1\r\n------WebKitFormBoundaryml6aYqp5NPR1V6C9\r\nContent-Disposition: form-data;name="storageOption"\r\n\r\n"{\\"cloudType\\": 0}"\r\n------WebKitFormBoundaryml6aYqp5NPR1V6C9--\r\n' \
     --compressed \
     --insecure
```



### IPFS传输

Datum对接分布式存储服务，用户可选择将原始数据传输至IPFS实现分布式管理。

#### 使用场景

- 将自己本地的原始数据上传到Datum，由Datum统一托管到IPFS。  

#### 功能描述


- 将用户的原始数据由Datum托管到IPFS上存储，使得用户的原始数据通过Datum接入Web3方便后续对数据进行资产化、数据检索、数据使用等服务。


#### 如何使用


- 接口名称：`uploadData`

- 请求方式: `POST`

- 请求数据类型: `multipart/form-data`

- 响应数据类型: `*/*`


- 请求参数：


|名称|类型|说明|是否必填|
|---|---|---|---|
|file|string|文件|Y| 
|storageType|int|存储方式(0： 本地存储； 1： 云存储； 2： IPFS存储； 3： 区块链存储)|Y|
|storageOption|string|json格式的字符串表示存储方式的选项，和storageType搭配使用[查看](#storageOption值说明)|Y|


- 响应状态:


|状态码| 说明 |
|---|---|---| 
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|json|上传后的摘要信息|Y|
|originId|string|上传后的原始数据的originId,代表该原始数据在Datum中的唯一标识|Y|
|hash|string|上传后的原始数据内容Hash|Y|
|msg|string|响应描述|Y|



- 响应示例:

  ```json
  {
      "status": 200,
      "result": {
        "originId": "0xdadad...454545",
        "hash": "295e5ae656d084dfda86c4ef7c38719ee1fb650899ec66d15d543b30c8f45b87"
      },
      "msg": "OK"
  }
  ```


- 使用示例

```shell
curl 'https://datum.io/api/v2/data/uploadData' \
     -H 'Accept: application/json, text/plain, */*' \
     -H 'Accept-Language: zh-CN,zh;q=0.9' \
     -H 'Connection: keep-alive' \
     -H 'Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryml6aYqp5NPR1V6C9' \
     -H 'Origin: http://datum.io' \
     --data-raw $'------WebKitFormBoundaryml6aYqp5NPR1V6C9\r\nContent-Disposition: form-data; name="file"; filename="服务清单.xlsx"\r\nContent-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\r\n\r   \n\r\n------WebKitFormBoundaryml6aYqp5NPR1V6C9\r\nContent-Disposition: form-data; name="storageType"\r\n\r\n2\r\n------WebKitFormBoundaryml6aYqp5NPR1V6C9\r\nContent-Disposition: form-data;name="storageOption"\r\n\r\n""\r\n------WebKitFormBoundaryml6aYqp5NPR1V6C9--\r\n' \
     --compressed \
     --insecure
```





### 区块链传输

Datum提供联盟链、公有链对接服务，用户可将原始数据直接传输上链。 区块链链支持，以太坊、PlatON等。

#### 使用场景

- 将自己本地的原始数据上传到Datum，由Datum统一托管到Datum所对接的区块链中存储。  

#### 功能描述


- 将用户的原始数据由Datum托管到所支持的区块链中存储，使得用户的原始数据通过Datum接入Web3方便后续对数据进行资产化、数据检索、数据使用等服务。


#### 如何使用


- 接口名称：`uploadData`

- 请求方式: `POST`

- 请求数据类型: `multipart/form-data`

- 响应数据类型: `*/*`


- 请求参数：


|名称|类型|说明|是否必填|
|---|---|---|---|
|file|string|文件|Y| 
|storageType|int|存储方式(0： 本地存储； 1： 云存储； 2： IPFS存储； 3： 区块链存储)|Y|
|storageOption|string|json格式的字符串表示存储方式的选项，和storageType搭配使用[查看](#storageOption值说明)|Y|


- 响应状态:


|状态码| 说明 |
|---|---|---| 
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|json|上传后的摘要信息|Y|
|originId|string|上传后的原始数据的originId,代表该原始数据在Datum中的唯一标识|Y|
|hash|string|上传后的原始数据内容Hash|Y|
|msg|string|响应描述|Y|



- 响应示例:

  ```json
  {
      "status": 200,
      "result": {
        "originId": "0xdadad...454545",
        "hash": "295e5ae656d084dfda86c4ef7c38719ee1fb650899ec66d15d543b30c8f45b87"
      },
      "msg": "OK"
  }
  ```


- 使用示例

```shell
curl 'https://datum.io/api/v2/data/uploadData' \
     -H 'Accept: application/json, text/plain, */*' \
     -H 'Accept-Language: zh-CN,zh;q=0.9' \
     -H 'Connection: keep-alive' \
     -H 'Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryml6aYqp5NPR1V6C9' \
     -H 'Origin: http://datum.io' \
     --data-raw $'------WebKitFormBoundaryml6aYqp5NPR1V6C9\r\nContent-Disposition: form-data; name="file"; filename="服务清单.xlsx"\r\nContent-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\r\n\r   \n\r\n------WebKitFormBoundaryml6aYqp5NPR1V6C9\r\nContent-Disposition: form-data; name="storageType"\r\n\r\n3\r\n------WebKitFormBoundaryml6aYqp5NPR1V6C9\r\nContent-Disposition: form-data;name="storageOption"\r\n\r\n"{\\"chainType\\": 1}"\r\n------WebKitFormBoundaryml6aYqp5NPR1V6C9--\r\n' \
     --compressed \
     --insecure
```



## 数据发布方式

在原始数据传输完成后，为了能实现web3生态下的数据服务能力，使得用户托管在Datum的原始数据能被生态应用方检索到，用户需要发布元数据信息。



### 拉回原始数据的未发布元数据信息


原始数据对于用户来说是极其宝贵的资产，一般除了用户个人意愿之外是不会向外暴露其中详细内容的，即便是托管到Datum上的原始数据也是一样，为了方便应用方能够在检索到原始数据之前对原始数据的一些特性有所了解，那么需要将原始数据的特征描述进行数据化。元数据就是对原始数据的特征描述信息的数据，一般描述了原始数据的大小、文件类型、使用场景等等特征。



#### 使用场景

- 用户上传到Datum的原始数据都会由Datum默认抽取其中特征信息打包成未发布的元数据，用户可以通过直接操作元数据来使得对应的原始数据在Web3中提现流行价值。  

#### 功能描述


- 获取被托管在Datum中的原始数据对应的未发布元数据信息，进而方便用户进一步完善对原始数据的描述。


#### 如何使用


- 接口名称：`queryLocalMetadata`

- 请求方式: `GET`

- 请求数据类型: 无

- 响应数据类型: `*/*`


- 请求参数：


|名称|类型|说明|是否必填|
|---|---|---|---|
|originId|string|用户将原始数据托管到Datum时返回的originId (即： 原始数据在Datum中的唯一标识)|Y| 



- 响应状态:


|状态码| 说明 |
|---|---|---| 
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|json|原始数据对应的未发布元数据信息|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": {
            "owner": {
                "nodeName": "new_org152",
                "nodeId": "3188983b115ee29a09fc4798e4944cbb82636bd202d4d4611bde1cc347c7790c62186e91d55584b62c967f7466db97211238f81da52aa3db94d203e1d30043bb",
                "identityId": "did:pid:lat18vpuxh97dh52y6kr5csacuj9qv2c7qaem5ax8d",
                "identityType": 0,
                "dataStatus": 0,
                "status": 0,
                "updateAt": "0",
                "imageUrl": "",
                "details": "",
                "credential": "",
                "nonce": "0"
            },
            "information": {
                    "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646",
                    "metadataName": "bank_predict_partyA",
                    "metadataType": 1,
                    "dataHash": "295e5ae656d084dfda86c4ef7c38719ee1fb650899ec66d15d543b30c8f45b87",
                    "desc": "bank_predict_partyA",
                    "locationType": 1,
                    "dataType": 1,
                    "industry": "1",
                    "state": 2,
                    "publishAt": "1660803893000",
                    "updateAt": "1660803893000",
                    "nonce": "5",
                    "metadataOption": "{\"metadataColumns\":[{\"index\":1,\"type\":\"string\",\"size\":0,\"name\":\"CLIENT_ID\"},{\"index\":2,\"type\":\"string\",\"size\":0,\"name\":\"DEFAULT\"},{\"index\":3,\"type\":\"string\",\"size\":0,\"name\":\"HOUSING\"},{\"index\":4,\"type\":\"string\",\"size\":0,\"name\":\"LOAN\"},{\"index\":5,\"type\":\"string\",\"size\":0,\"name\":\"CONTACT\"},{\"index\":6,\"type\":\"string\",\"size\":0,\"name\":\"CAMPAIGN\"},{\"index\":7,\"type\":\"string\",\"size\":0,\"name\":\"PDAYS\"},{\"index\":8,\"type\":\"string\",\"size\":0,\"name\":\"PREVIOUS\"},{\"index\":9,\"type\":\"string\",\"size\":0,\"name\":\"EURIBOR3M\"},{\"index\":10,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_APR\"},{\"index\":11,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_AUG\"},{\"index\":12,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_DEC\"},{\"index\":13,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_JUL\"},{\"index\":14,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_JUN\"},{\"index\":15,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_MAR\"},{\"index\":16,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_MAY\"},{\"index\":17,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_NOV\"},{\"index\":18,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_OCT\"},{\"index\":19,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_SEP\"},{\"index\":20,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_FRI\"},{\"index\":21,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_MON\"},{\"index\":22,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_THU\"},{\"index\":23,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_TUE\"},{\"index\":24,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_WED\"},{\"index\":25,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_FAILURE\"},{\"index\":26,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_NONEXISTENT\"},{\"index\":27,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_SUCCESS\"}],\"columns\":27,\"rows\":7925,\"consumeOptions\":[],\"dataPath\":\"/home/user1/data/data_root/bank_predict_partyA_20220818-062409.csv\",\"condition\":3,\"originId\":\"07ac869b639a4a810caa3d23cc1a3872109b0258f8da9ff13046f9fbee048c21\",\"size\":609112,\"consumeTypes\":[],\"hasTitle\":true}",
                    "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
                    "userType": 1,
                    "sign": ""
            }
        },
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request GET 'https://datum.io/api/v2/metadata/queryLocalMetadata?originId=0xdadad...454545'
```




### 发布元数据


对托管到Datum上的原始数据进行元数据的发布，方便被原始数据的应用方检索到对应的原始数据。 目前发布元数据从更为安全的角度除了支持将用户托管到Datum的原始数据进行元数据发布外，还支持用户引用自己本地的原始数据直接发布元数据。故分为（a）、对托管的原始数据发布元数据；（b）、引用本地原始数据发布元数据。


#### **（a）对托管的原始数据发布元数据**

#### 使用场景

- 引用托管到Datum的原始数据发起对原始数据信息进行描述的数据，即原始数据的元数据我们称之为元数据，元数据被发布后将会出现在数据市场中，方便应用方检索到与元数据对应的原始数据的描述，元数据包含了原始数据的基础特征及应用场景等描述，进而使得原始数据能在Web3中流动。  

#### 功能描述


- 引用托管到Datum的原始数据发起元数据，使得自己的原始数据的描述信息能在Web3中流动。


#### 如何使用


- 接口名称：`publishMetadata`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：


|名称|类型|说明|是否必填|
|---|---|---|---|
|metadataId|string|元数据Id|Y| 
|metadataName|string|元数据名称|Y|
|metadataType|int|元数据类型|Y|
|dataHash|string|原始数据内容Hash|Y|
|desc|string|数据描述|Y|
|locationType|int|原始数据存储的方式|Y|
|dataType|int|原始数据的类型|Y|
|industry|string|数据适用行业|Y|
|state|int|元数据状态|Y|
|metadataOption|stirng|元数据的选项信息json字符串|Y|
|user|string|用户信息|Y|
|userType|int|用户类型|Y|
|sign|string|元数据的消息签名|Y|


- 请求参数示例：

```json
{
      "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646",
      "metadataName": "bank_predict_partyA",
      "metadataType": 1,
      "dataHash": "295e5ae656d084dfda86c4ef7c38719ee1fb650899ec66d15d543b30c8f45b87",
      "desc": "bank_predict_partyA",
      "locationType": 1,
      "dataType": 1,
      "industry": "1",
      "state": 2,
      "metadataOption": "{\"metadataColumns\":[{\"index\":1,\"type\":\"string\",\"size\":0,\"name\":\"CLIENT_ID\"},{\"index\":2,\"type\":\"string\",\"size\":0,\"name\":\"DEFAULT\"},{\"index\":3,\"type\":\"string\",\"size\":0,\"name\":\"HOUSING\"},{\"index\":4,\"type\":\"string\",\"size\":0,\"name\":\"LOAN\"},{\"index\":5,\"type\":\"string\",\"size\":0,\"name\":\"CONTACT\"},{\"index\":6,\"type\":\"string\",\"size\":0,\"name\":\"CAMPAIGN\"},{\"index\":7,\"type\":\"string\",\"size\":0,\"name\":\"PDAYS\"},{\"index\":8,\"type\":\"string\",\"size\":0,\"name\":\"PREVIOUS\"},{\"index\":9,\"type\":\"string\",\"size\":0,\"name\":\"EURIBOR3M\"},{\"index\":10,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_APR\"},{\"index\":11,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_AUG\"},{\"index\":12,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_DEC\"},{\"index\":13,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_JUL\"},{\"index\":14,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_JUN\"},{\"index\":15,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_MAR\"},{\"index\":16,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_MAY\"},{\"index\":17,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_NOV\"},{\"index\":18,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_OCT\"},{\"index\":19,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_SEP\"},{\"index\":20,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_FRI\"},{\"index\":21,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_MON\"},{\"index\":22,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_THU\"},{\"index\":23,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_TUE\"},{\"index\":24,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_WED\"},{\"index\":25,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_FAILURE\"},{\"index\":26,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_NONEXISTENT\"},{\"index\":27,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_SUCCESS\"}],\"columns\":27,\"rows\":7925,\"consumeOptions\":[],\"dataPath\":\"/home/user1/data/data_root/bank_predict_partyA_20220818-062409.csv\",\"condition\":3,\"originId\":\"07ac869b639a4a810caa3d23cc1a3872109b0258f8da9ff13046f9fbee048c21\",\"size\":609112,\"consumeTypes\":[],\"hasTitle\":true}",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}
```



- 响应状态:


|状态码| 说明 |
|---|---|---| 
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|json|返回信息|Y|
|originId|string|上传后的原始数据的originId,代表该原始数据在Datum中的唯一标识|Y|
|metadataId|string|发布后的元数据Id|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": {
        "originId": "0xdadad...454545",
        "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"
      },
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request POST 'https://datum.io/api/v2/metadat/publishMetadata' \
--header 'Content-Type: application/json' \
--data-raw '{
      "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646",
      "metadataName": "bank_predict_partyA",
      "metadataType": 1,
      "dataHash": "295e5ae656d084dfda86c4ef7c38719ee1fb650899ec66d15d543b30c8f45b87",
      "desc": "bank_predict_partyA",
      "locationType": 1,
      "dataType": 1,
      "industry": "1",
      "state": 2,
      "metadataOption": "{\"metadataColumns\":[{\"index\":1,\"type\":\"string\",\"size\":0,\"name\":\"CLIENT_ID\"},{\"index\":2,\"type\":\"string\",\"size\":0,\"name\":\"DEFAULT\"},{\"index\":3,\"type\":\"string\",\"size\":0,\"name\":\"HOUSING\"},{\"index\":4,\"type\":\"string\",\"size\":0,\"name\":\"LOAN\"},{\"index\":5,\"type\":\"string\",\"size\":0,\"name\":\"CONTACT\"},{\"index\":6,\"type\":\"string\",\"size\":0,\"name\":\"CAMPAIGN\"},{\"index\":7,\"type\":\"string\",\"size\":0,\"name\":\"PDAYS\"},{\"index\":8,\"type\":\"string\",\"size\":0,\"name\":\"PREVIOUS\"},{\"index\":9,\"type\":\"string\",\"size\":0,\"name\":\"EURIBOR3M\"},{\"index\":10,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_APR\"},{\"index\":11,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_AUG\"},{\"index\":12,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_DEC\"},{\"index\":13,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_JUL\"},{\"index\":14,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_JUN\"},{\"index\":15,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_MAR\"},{\"index\":16,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_MAY\"},{\"index\":17,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_NOV\"},{\"index\":18,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_OCT\"},{\"index\":19,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_SEP\"},{\"index\":20,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_FRI\"},{\"index\":21,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_MON\"},{\"index\":22,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_THU\"},{\"index\":23,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_TUE\"},{\"index\":24,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_WED\"},{\"index\":25,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_FAILURE\"},{\"index\":26,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_NONEXISTENT\"},{\"index\":27,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_SUCCESS\"}],\"columns\":27,\"rows\":7925,\"consumeOptions\":[],\"dataPath\":\"/home/user1/data/data_root/bank_predict_partyA_20220818-062409.csv\",\"condition\":3,\"originId\":\"07ac869b639a4a810caa3d23cc1a3872109b0258f8da9ff13046f9fbee048c21\",\"size\":609112,\"consumeTypes\":[],\"hasTitle\":true}",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}'
```






#### **（b）引用本地原始数据发布元数据**

#### 使用场景

- 引用用户自行存储在本地的原始数据信息进行描述的数据，即原始数据的元数据我们称之为元数据，元数据被发布后将会出现在数据市场中，方便应用方检索到与元数据对应的原始数据的描述，元数据包含了原始数据的基础特征及应用场景等描述，进而使得原始数据能在Web3中流动。  

#### 功能描述


- 引用用户自行存储在本地的原始数据发起元数据，使得自己的原始数据的描述信息能在Web3中流动。


#### 如何使用


- 接口名称：`publishMetadataWithLocalDdata`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：


|名称|类型|说明|是否必填|
|---|---|---|---|
|metadataId|string|元数据Id|Y| 
|metadataName|string|元数据名称|Y|
|metadataType|int|元数据类型|Y|
|dataHash|string|原始数据内容Hash|Y|
|desc|string|数据描述|Y|
|locationType|int|原始数据存储的方式|Y|
|dataType|int|原始数据的类型|Y|
|industry|string|数据适用行业|Y|
|state|int|元数据状态|Y|
|metadataOption|stirng|元数据的选项信息json字符串|Y|
|user|string|用户信息|Y|
|userType|int|用户类型|Y|
|sign|string|元数据的消息签名|Y|


- 请求参数示例：

```json
{
      "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646",
      "metadataName": "bank_predict_partyA",
      "metadataType": 1,
      "dataHash": "295e5ae656d084dfda86c4ef7c38719ee1fb650899ec66d15d543b30c8f45b87",
      "desc": "bank_predict_partyA",
      "locationType": 1,
      "dataType": 1,
      "industry": "1",
      "state": 2,
      "metadataOption": "{\"metadataColumns\":[{\"index\":1,\"type\":\"string\",\"size\":0,\"name\":\"CLIENT_ID\"},{\"index\":2,\"type\":\"string\",\"size\":0,\"name\":\"DEFAULT\"},{\"index\":3,\"type\":\"string\",\"size\":0,\"name\":\"HOUSING\"},{\"index\":4,\"type\":\"string\",\"size\":0,\"name\":\"LOAN\"},{\"index\":5,\"type\":\"string\",\"size\":0,\"name\":\"CONTACT\"},{\"index\":6,\"type\":\"string\",\"size\":0,\"name\":\"CAMPAIGN\"},{\"index\":7,\"type\":\"string\",\"size\":0,\"name\":\"PDAYS\"},{\"index\":8,\"type\":\"string\",\"size\":0,\"name\":\"PREVIOUS\"},{\"index\":9,\"type\":\"string\",\"size\":0,\"name\":\"EURIBOR3M\"},{\"index\":10,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_APR\"},{\"index\":11,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_AUG\"},{\"index\":12,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_DEC\"},{\"index\":13,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_JUL\"},{\"index\":14,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_JUN\"},{\"index\":15,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_MAR\"},{\"index\":16,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_MAY\"},{\"index\":17,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_NOV\"},{\"index\":18,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_OCT\"},{\"index\":19,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_SEP\"},{\"index\":20,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_FRI\"},{\"index\":21,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_MON\"},{\"index\":22,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_THU\"},{\"index\":23,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_TUE\"},{\"index\":24,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_WED\"},{\"index\":25,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_FAILURE\"},{\"index\":26,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_NONEXISTENT\"},{\"index\":27,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_SUCCESS\"}],\"columns\":27,\"rows\":7925,\"consumeOptions\":[],\"dataPath\":\"/home/user1/data/data_root/bank_predict_partyA_20220818-062409.csv\",\"condition\":3,\"originId\":\"07ac869b639a4a810caa3d23cc1a3872109b0258f8da9ff13046f9fbee048c21\",\"size\":609112,\"consumeTypes\":[],\"hasTitle\":true}",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}
```



- 响应状态:


|状态码| 说明 |
|---|---|---| 
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|json|返回信息|Y|
|originId|string|上传后的原始数据的originId,代表该原始数据在Datum中的唯一标识|Y|
|metadataId|string|发布后的元数据Id|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": {
        "originId": "0xdadad...454545",
        "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"
      },
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request POST 'https://datum.io/api/v2/metadat/publishMetadataWithLocalDdata' \
--header 'Content-Type: application/json' \
--data-raw '{
      "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646",
      "metadataName": "bank_predict_partyA",
      "metadataType": 1,
      "dataHash": "295e5ae656d084dfda86c4ef7c38719ee1fb650899ec66d15d543b30c8f45b87",
      "desc": "bank_predict_partyA",
      "locationType": 1,
      "dataType": 1,
      "industry": "1",
      "state": 2,
      "metadataOption": "{\"metadataColumns\":[{\"index\":1,\"type\":\"string\",\"size\":0,\"name\":\"CLIENT_ID\"},{\"index\":2,\"type\":\"string\",\"size\":0,\"name\":\"DEFAULT\"},{\"index\":3,\"type\":\"string\",\"size\":0,\"name\":\"HOUSING\"},{\"index\":4,\"type\":\"string\",\"size\":0,\"name\":\"LOAN\"},{\"index\":5,\"type\":\"string\",\"size\":0,\"name\":\"CONTACT\"},{\"index\":6,\"type\":\"string\",\"size\":0,\"name\":\"CAMPAIGN\"},{\"index\":7,\"type\":\"string\",\"size\":0,\"name\":\"PDAYS\"},{\"index\":8,\"type\":\"string\",\"size\":0,\"name\":\"PREVIOUS\"},{\"index\":9,\"type\":\"string\",\"size\":0,\"name\":\"EURIBOR3M\"},{\"index\":10,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_APR\"},{\"index\":11,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_AUG\"},{\"index\":12,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_DEC\"},{\"index\":13,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_JUL\"},{\"index\":14,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_JUN\"},{\"index\":15,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_MAR\"},{\"index\":16,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_MAY\"},{\"index\":17,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_NOV\"},{\"index\":18,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_OCT\"},{\"index\":19,\"type\":\"string\",\"size\":0,\"name\":\"MONTH_SEP\"},{\"index\":20,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_FRI\"},{\"index\":21,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_MON\"},{\"index\":22,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_THU\"},{\"index\":23,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_TUE\"},{\"index\":24,\"type\":\"string\",\"size\":0,\"name\":\"DAY_OF_WEEK_WED\"},{\"index\":25,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_FAILURE\"},{\"index\":26,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_NONEXISTENT\"},{\"index\":27,\"type\":\"string\",\"size\":0,\"name\":\"POUTCOME_SUCCESS\"}],\"columns\":27,\"rows\":7925,\"consumeOptions\":[],\"dataPath\":\"/home/user1/data/data_root/bank_predict_partyA_20220818-062409.csv\",\"condition\":3,\"originId\":\"07ac869b639a4a810caa3d23cc1a3872109b0258f8da9ff13046f9fbee048c21\",\"size\":609112,\"consumeTypes\":[],\"hasTitle\":true}",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}'
```




### 发布数据Hash

在某些场景下，用户出于业务需求需要发布原始数据Hash。


#### 使用场景

- 用户在某些时候并不想将自己的原始数据暴露对外，也不想将原始数据提供给外部适用，仅仅是想对自己的原始数据不可篡改做一次证明，此时用户可以将原始数据的Hash通过Datum发布到Web3中。  

#### 功能描述


- 引用用户自己的原始数据内容Hash，发布到Web3中。


#### 如何使用


- 接口名称：`publishDataHash`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：


|名称|类型|说明|是否必填|
|---|---|---|---|
|dataHash|string|原始数据内容Hash|Y|
|desc|string|数据描述|Y|
|user|string|用户信息|Y|
|userType|int|用户类型|Y|
|sign|string|元数据的消息签名|Y|


- 请求参数示例：

```json
{
      "dataHash": "295e5ae656d084dfda86c4ef7c38719ee1fb650899ec66d15d543b30c8f45b87",
      "desc": "bank_predict_partyA",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}
```



- 响应状态:


|状态码| 说明 |
|---|---|---| 
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|json|返回信息|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": "",
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request POST 'https://datum.io/api/v2/metadat/publishDataHash' \
--header 'Content-Type: application/json' \
--data-raw '{
      "dataHash": "295e5ae656d084dfda86c4ef7c38719ee1fb650899ec66d15d543b30c8f45b87",
      "desc": "bank_predict_partyA",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}'
```




**补充**

#### <span id="storageOption值说明"> storageOption值说明： </span>



- storageType： 0

- storageOption：

```
""
```


- storageType： 1

- storageOption：

```
"{
    "cloudType": 0    // 0: 使用Datum默认的方式存储； 1: 使用Datum提供的阿里云存储； 2: 使用Datum提供的腾讯云存储；...
  }"
```




- storageType： 2

- storageOption：

```
""
```


- storageType： 3

- storageOption：

```
"{
    "chainType": 0 // 0: 使用Alaya存储； 1: 使用PlatON存储； 2: 使用Etheruem存储；...
  }"
```



