# 数据资产化


数据资产化是以NFT的形式，将原始数据打包固定成一类特殊的资产，通过NFT的形式实现对资产的权利确认、交易使用、收益获得。



## 支持的数据资产化模式

- 发行NFT-721数据资产
- NFT属性设置：设置NFT的权限等属性


### 获取NFT合约模板信息


为了方便用户一键式发布数据资产，Datum内置了一些列的NFT合约模板，基于NFT合约模板的基础上用户也可拓展合约属性做到自定义部署数据资产。


#### 使用场景

- 用户在发布数据资产时进行NFT合约部署使用到的Datum内置NFT合约模板可能不能完全满足用户的某些特殊场景，此时用户需要基于NFT模板进行自定义拓展。  

#### 功能描述


- 获取Datum内置的NFT合约模板。


#### 如何使用


- 接口名称：`queryNFTContractTempleteList`

- 请求方式: `GET`

- 请求数据类型: 无

- 响应数据类型: `*/*`


- 请求参数：

无



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|Datum内置的NFT合约模板列表|Y|
|templeteId|int|Datum内置的NFT合约模板Id|Y|
|templeteType|int|Datum内置的NFT合约模板的合约类型|Y|
|templeteContent|string|Datum内置的NFT合约模板的合约内容|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": [
        {
            "templeteId": 1,
            "templeteType": 1,
            "templeteContent": "{xxx}" 
        }
      ],
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request GET 'https://datum.io/api/v2/dataAsset/queryNFTContractTempleteList'
```




### 完成NFT合约部署

调用API获取标准NFT-721合约模板，用户可在已传输的原始数据中选择固定数据资源，设置Data NFT资产。用户可以在一个NFT合约中管理多个原始数据，或者通过不同的NFT合约区分管理不同的原始数据。NFT合约设置完成后，需要选择区块链进行发布方能生效。目前可对接的公有链有以太坊、PlatON，也支持对接联盟链。



#### 使用场景

- 用户使用Datum内置NFT合约模板关联到响应的元数据信息进行合约部署，进而做到将用户的原始数据在Web3中的流动价值资产化。  

#### 功能描述


- 使用Datum内置NFT合约模板关联元数据发布NFT。


#### 如何使用


- 接口名称：`deployNFT`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：


|名称|类型|说明|是否必填|
|---|---|---|---|
|metadataId|string|元数据Id|Y| 
|templeteId|string|NFT合约内容|Y|
|option|string|用户自定义的属性选项|Y|
|desc|string|部署描述|Y|
|user|string|用户信息|Y|
|userType|int|用户类型|Y|
|sign|string|元数据的消息签名|Y|


- 请求参数示例：

```json
{
      "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646",
      "templeteId": 1,
      "option": "{XXx}",
      "desc": "第一个合约",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}
```



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|json|返回信息|Y|
|txHash|string|部署合约的交易Hash|Y|
|contractAddress|string|合约地址|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": {
        "txHash": "0xdadad...454545",
        "contractAddress": "0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"
      },
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request POST 'https://datum.io/api/v2/dataAsset/deployNFT' \
--header 'Content-Type: application/json' \
--data-raw '{
      "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646",
      "templeteId": 1,
      "option": "{XXx}",
      "desc": "第一个合约",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}'
```



### 查看已发布的NFT合约

选择对应的NFT合约，查看设置的信息、属性。


#### 使用场景

- 用户在对数据资产的NFT合约部署后，想查看合约的详情时。  

#### 功能描述


- 获取部署好的NFT合约信息。


#### 如何使用


- 接口名称：`queryNFTContractDeployList`

- 请求方式: `GET`

- 请求数据类型: 无

- 响应数据类型: `*/*`


- 请求参数：

|名称|类型|说明|是否必填|
|---|---|---|---|
|userType|int|用户类型|Y| 
|user|string|用户信息|Y|


- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|用户部署好的NFT合约列表|Y|
|templeteId|int|NFT合约部署时使用的Datum内置合约模板Id|Y|
|metadataId|string|NFT合约关联的元数据Id|Y|
|contractContent||NFT合约内容|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": [
        {
            "templeteId": 1,
            "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646",
            "contractContent": "{xxx}" 
        }
      ],
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request GET 'https://datum.io/api/v2/dataAsset/queryNFTContractDeployList?userType=1&user="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"'
```



### 铸造Data NFT Token


用户能够基于已发布的NFT合约，铸造不同属性的Data NFT token并设置数量，来完成对不同原始数据的资产化操作。如果用户的NFT合约包含了多个原始数据，可以铸造不同名称的Data NFT Token进行区分。有关数据资产的分享、交易、使用都将以Data NFT Token作为凭证实现操作。

### 使用场景

- 当数据提供方发行的某个NFT且未转移到其他用户时，如果需要对此NFT的属性进行修改或扩展，如修改访问权限，修改原文件存储路径等，可调用此API进行设置。

### 功能描述

- 用户铸造新的NFT Token

### 如何使用


- 接口名称：`mintNFTToken`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：

|名称|类型|说明|是否必填|
|---|---|---|---|
|contractAddress|address|NFT合约地址|Y|
|chainId|uint32|链id，默认为1，表示ethereum主网|N|
|property|string|NFT属性描述，json格式|Y|



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|用户部署好的NFT合约列表|Y|
|transactionHash|string|交易Hash|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
    "status": 200,
    "result": {
        "transactionHash": "0xxxxxxxxxxxxxxxxxxxx"
    },
    "msg": "OK"
}
```

- 使用示例

```shell
curl --request POST \
     --url 'https://datum.io/api/v2/dataAsset/mintNFTToken?contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId&property=$property' \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'X-API-Key: test'
```



### 销毁Data NFT Token

用户可以自行销毁已经铸造的未被交易使用的Data NFT Token。


### 使用场景

- 用户需要销毁自己铸造的NFT Token时。

### 功能描述

- 销毁NFT Token

### 如何使用


- 接口名称：`burnNFTToken`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：

|名称|类型|说明|是否必填|
|---|---|---|---|
|contractAddress|address|NFT合约地址|Y|
|chainId|uint32|链id，默认为1，表示ethereum主网|N|
|tokenid|string|NFT的id|Y|



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|用户部署好的NFT合约列表|Y|
|transactionHash|string|交易Hash|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
    "status": 200,
    "result": {
        "transactionHash": "0xxxxxxxxxxxxxxxxxxxx"
    },
    "msg": "OK"
}
```

- 使用示例

```shell
curl --request POST \
     --url 'https://datum.io/api/v2/dataAsset/burnNFTToken?contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId&tokenid=$tokenid' \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'X-API-Key: test'
```




### Data NFT Token属性设置


Data NFT Token支持添加、修改、管理各类属性，属性可用户定义该Token的使用权限及使用方式。


- 具体分为：


a、所有权属性设置。管理Data NFT Token交易买卖后的持有对象，所有权属性的变更意味着持有人的变更。

b、使用方式属性设置。管理Data NFT Token交易后能够按次数、按期限访问该Token对应的原始数据。

c、使用权限属性设置。管理Data NFT Token交易后能够查看、下载该Token对应的原始数据或元数据权限。

d、其他属性设置。管理Data NFT Token对应的原始数据存储路径、或其他用户希望让合作方看到的信息。



### 使用场景

- 当数据提供方发行的某个NFT且未转移到其他用户时，如果需要对此NFT的属性进行修改或扩展，如修改访问权限，修改原文件存储路径等，可调用此API进行设置。

### 功能描述

数据提供方通过调用NFT属性设置API接口，可以设置NFT的属性，如：

- NFT权限属性
  - 所有权权限属性（明文计算）
    - 原数据查看权限属性
    - 原数据下载权限属性
  - 使用权权限属性（密文计算）
    - 次数
    - 有效期
- 原数据文件存储路径属性
- .....
- 

### 如何使用


- 接口名称：`setNFTTokenProperty`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：

|名称|类型|说明|是否必填|
|---|---|---|---|
|contractAddress|address|NFT合约地址|Y|
|chainId|uint32|链id，默认为1，表示ethereum主网|N|
|tokenid|string|NFT的id|Y|
|property|string|NFT属性描述，json格式|Y|



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|用户部署好的NFT合约列表|Y|
|transactionHash|string|交易Hash|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
    "status": 200,
    "result": {
        "transactionHash": "0xxxxxxxxxxxxxxxxxxxx"
    },
    "msg": "OK"
}
```

- 使用示例

```shell
curl --request POST \
     --url 'https://datum.io/api/v2/dataAsset/setNFTTokenProperty?contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId&tokenid=$tokenid&property=$property' \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'X-API-Key: test'
```


### 查看已铸造的Data NFT Token


选择对应的NFT合约，查看用户已经铸造的Data NFT Token 列表。


#### 使用场景

- 用户查看合已经铸造的Data NFT Token信息时。  

#### 功能描述


- 获取已经铸造的Data NFT Token信息。


#### 如何使用


- 接口名称：`queryNFTTokenList`

- 请求方式: `GET`

- 请求数据类型: 无

- 响应数据类型: `*/*`


- 请求参数：

|名称|类型|说明|是否必填|
|---|---|---|---|
|userType|int|用户类型|Y| 
|user|string|用户信息|Y|
|contractAddress|address|NFT合约地址|Y|
|chainId|uint32|链id，默认为1，表示ethereum主网|N|


- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|用户部署好的NFT合约列表|Y|
|templeteId|int|NFT合约部署时使用的Datum内置合约模板Id|Y|
|metadataId|string|NFT合约关联的元数据Id|Y|
|contractContent||NFT合约内容|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": [
        {
            "templeteId": 1,
            "metadataId": "metadata:0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646",
            "contractContent": "{xxx}" 
        }
      ],
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request GET 'https://datum.io/api/v2/dataAsset/queryNFTTokenList?userType=1&user="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId'
```
