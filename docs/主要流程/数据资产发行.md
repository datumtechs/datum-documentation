# 数据资产发行


数据资产发行是以NFT的形式，将原始数据打包固定成一类特殊的资产，通过NFT的形式实现对资产的权利确认、交易使用、收益获得。

**支持的数据资产发行类型**

- 发行NFT-721数据资产
- 设置NFT属性和使用权限


### 获取NFT合约模板


为了方便用户一键发布数据资产，Datum提供一系列NFT合约模板，例如：NFT721合约模板。用户也可在NFT合约模板的基础，通过合约属性的设置，发行自定义数据资产。


**如何使用**


- 接口名称：`queryNFTContractTempleteList`

- 请求方式: `GET`

- 请求数据类型: 无

- 响应数据类型: `*/*`


- 请求参数：

无



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|Datum内置的NFT合约模板列表|Y|
|templeteId|int|Datum内置的NFT合约模板Id|Y|
|templeteType|int|Datum内置的NFT合约模板的合约类型|Y|
|templeteContent|string|Datum内置的NFT合约模板的合约内容|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": [
        {
            "templeteId": 1,
            "templeteType": 1,
            "templeteContent": "{xxx}" 
        }
      ],
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request GET 'http://datumtechs.com/api/v2/dataAsset/queryNFTContractTempleteList'
```




### 完成NFT合约部署

用户在获取NFT合约模板后，可选择关联已传输的原始数据，或者发布的元数据，完成NFT合约部署。不同的原始数据由不同的NFT合约进行管理。

NFT合约设置完成后，用户需要选择区块链进行发布方能生效。目前可对接的公有链有以太坊、PlatON (默认)，也支持对接联盟链。



**如何使用**


- 接口名称：`deployNFT`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：


|名称|类型|说明|是否必填|
|---|---|---|---|
|templeteId|string|NFT合约内容|Y|
|option|string|用户自定义的属性选项(json字段，包含已发布的元数据的metadataId或者直接包含原始数据的originId及原始数据的检索路径等信息)|Y|
|desc|string|描述信息|N|
|user|string|用户信息|Y|
|userType|int|用户类型|Y|
|sign|string|元数据的消息签名|Y|


- 请求参数示例：

```json
{
      "templeteId": 1,
      "option": "{XXx}",
      "desc": "第一个合约",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}
```



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|json|返回信息|Y|
|txHash|string|部署合约的交易Hash|Y|
|contractAddress|string|合约地址|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": {
        "txHash": "0xdadad...454545",
        "contractAddress": "0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"
      },
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request POST 'http://datumtechs.com/api/v2/dataAsset/deployNFT' \
--header 'Content-Type: application/json' \
--data-raw '{
      "templeteId": 1,
      "option": "{XXx}",
      "desc": "第一个合约",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}'
```



### 查看已发布的NFT合约

用户可选择已部署的NFT合约，查看合约详情。



**如何使用**


- 接口名称：`queryNFTContractDeployList`

- 请求方式: `GET`

- 请求数据类型: 无

- 响应数据类型: `*/*`


- 请求参数：

|名称|类型|说明|是否必填|
|---|---|---|---|
|userType|int|用户类型|Y| 
|user|string|用户信息|Y|


- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|用户部署好的NFT合约列表|Y|
|templeteId|int|NFT合约部署时使用的Datum内置合约模板Id|Y|
|contractContent||NFT合约内容|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": [
        {
            "templeteId": 1,
            "contractContent": "{xxx}" 
        }
      ],
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request GET 'http://datumtechs.com/api/v2/dataAsset/queryNFTContractDeployList?userType=1&user="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"'
```



### 铸造Data NFT Token


用户能够基于已发布的NFT合约，铸造不同属性的Data NFT token并设置数量，来完成对不同原始数据的资产化操作。数据资产的分享、交易、使用都将以Data NFT Token作为凭证实现操作。


**如何使用**


- 接口名称：`mintNFTToken`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：

|名称|类型|说明|是否必填|
|---|---|---|---|
|contractAddress|address|NFT合约地址|Y|
|chainId|uint32|链id，默认为1，表示ethereum主网|N|
|property|string|NFT Data Token属性描述，json格式|Y|



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|用户部署好的NFT合约列表|Y|
|transactionHash|string|交易Hash|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
    "status": 200,
    "result": {
        "transactionHash": "0xxxxxxxxxxxxxxxxxxxx"
    },
    "msg": "OK"
}
```

- 使用示例

```shell
curl --request POST \
     --url 'http://datumtechs.com/api/v2/dataAsset/mintNFTToken?contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId&property=$property' \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'X-API-Key: test'
```



### 销毁Data NFT Token

用户可以自行销毁已经铸造的且未被交易使用的Data NFT Token。


**如何使用**


- 接口名称：`burnNFTToken`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：

|名称|类型|说明|是否必填|
|---|---|---|---|
|contractAddress|address|NFT合约地址|Y|
|chainId|uint32|链id，默认为1，表示ethereum主网|N|
|tokenid|string|NFT Data Token的id|Y|



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|用户部署好的NFT合约列表|Y|
|transactionHash|string|交易Hash|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
    "status": 200,
    "result": {
        "transactionHash": "0xxxxxxxxxxxxxxxxxxxx"
    },
    "msg": "OK"
}
```

- 使用示例

```shell
curl --request POST \
     --url 'http://datumtechs.com/api/v2/dataAsset/burnNFTToken?contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId&tokenid=$tokenid' \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'X-API-Key: test'
```




### Data NFT Token属性设置


Data NFT Token支持添加、修改、管理各类属性，属性可用户定义该Token的使用权限及使用方式。


- 具体分为：


a、所有权属性设置。管理Data NFT Token交易买卖后的持有对象，所有权属性的变更意味着持有人的变更。

b、使用方式属性设置。管理Data NFT Token交易后能够按次数、按期限访问该Token对应的原始数据。

c、使用权限属性设置。管理Data NFT Token交易后能够查看、下载该Token对应的原始数据或元数据权限。

d、其他属性设置。管理Data NFT Token对应的原始数据存储路径、或其他用户希望让合作方看到的信息。



**如何使用**


- 接口名称：`setNFTTokenProperty`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：

|名称|类型|说明|是否必填|
|---|---|---|---|
|contractAddress|address|NFT合约地址|Y|
|chainId|uint32|链id，默认为1，表示ethereum主网|N|
|tokenid|string|NFT Data Token的id|Y|
|property|string|NFT Data Token属性描述，json格式|Y|



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|用户部署好的NFT合约列表|Y|
|transactionHash|string|交易Hash|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
    "status": 200,
    "result": {
        "transactionHash": "0xxxxxxxxxxxxxxxxxxxx"
    },
    "msg": "OK"
}
```

- 使用示例

```shell
curl --request POST \
     --url 'http://datumtechs.com/api/v2/dataAsset/setNFTTokenProperty?contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId&tokenid=$tokenid&property=$property' \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'X-API-Key: test'
```


### 查看Data NFT Token信息


选择对应的NFT合约，查看用户已经铸造的Data NFT Token 列表。



**如何使用**


- 接口名称：`queryNFTTokenList`

- 请求方式: `GET`

- 请求数据类型: 无

- 响应数据类型: `*/*`


- 请求参数：

|名称|类型|说明|是否必填|
|---|---|---|---|
|userType|int|用户类型|Y| 
|user|string|用户信息|Y|
|contractAddress|address|NFT合约地址|Y|
|chainId|uint32|链id，默认为1，表示ethereum主网|N|


- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|jsonArray|用户部署好的NFT合约列表|Y|
|templeteId|int|NFT合约部署时使用的Datum内置合约模板Id|Y|
|tokenid|string|NFT Data Token的id|Y|
|property|string|NFT Data Token属性描述，json格式|Y|
|msg|string|响应描述|Y|



- 响应示例:

```json
{
      "status": 200,
      "result": [
        {
            "templeteId": 1,
            "tokenid": "#1",
            "property": "{xxxxx}"

        }
      ],
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request GET 'http://datumtechs.com/api/v2/dataAsset/queryNFTTokenList?userType=1&user="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId'
```
