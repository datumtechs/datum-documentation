# 数据资产化API说明

数据资产发行是以NFT的形式，将原始数据打包固定成一类特殊的资产，通过NFT的形式实现对资产的权利确认、交易使用、收益获得。

## Token

Datum官网服务数据资产化支持ERC20代币标准；数据资产化流程包括：获取合约模板，部署合约，关联原始数据（地址）/对应元数据（已发布），铸造Token，销毁Token。

### 获取合约模板

通过调用api可以获取合约模板，合约模板遵循ERC20代币标准，该标准中包含了固定的接口和事件，如：铸造Token，销毁Token等。

**如何使用**


- 接口名称：`queryTokenContractTempleteList`

- 请求方式: `GET`

- 请求数据类型: 无

- 响应数据类型: `*/*`


- 请求参数：

无

- 响应状态:


| 状态码 | 说明         |
| ------ | ------------ |
| 200    | OK           |
| 201    | Created      |
| 401    | Unauthorized |
| 403    | Forbidden    |
| 404    | Not Found    |


- 响应参数:


| 名称            | 类型      | 说明                               | 是否必填 |
| --------------- | --------- | ---------------------------------- | -------- |
| status          | int       | 响应码                             | Y        |
| result          | jsonArray | Datum内置的Token合约模板列表       | Y        |
| templeteId      | int       | Datum内置的Token合约模板Id         | Y        |
| templeteType    | int       | Datum内置的Token合约模板的合约类型 | Y        |
| templeteContent | string    | Datum内置的Token合约模板的合约内容 | Y        |
| msg             | string    | 响应描述                           | Y        |

- 响应示例:

```json
{
      "status": 200,
      "result": [
        {
            "templeteId": 1,
            "templeteType": 1,
            "templeteContent": "{xxx}" 
        }
      ],
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request GET 'http://datumtechs.com/api/v2/dataAsset/queryTokenContractTempleteList'
```

### 部署合约

数据提供方使用自己的钱包将获取的合约模板部署到指定的链，如：PlatON (默认)，Ethereum等，部署成功后返回合约地址。

**如何使用**


- 接口名称：`deployToken`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：


| 名称       | 类型   | 说明       | 是否必填 |
| ---------- | ------ | ---------- | -------- |
| templeteId | string | 合约模板ID | Y        |
| user       | string | 用户信息   | Y        |
| userType   | int    | 用户类型   | Y        |


- 请求参数示例：

```json
{
      "templeteId": 1,
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1
}
```

- 响应状态:


| 状态码 | 说明         |
| ------ | ------------ |
| 200    | OK           |
| 201    | Created      |
| 401    | Unauthorized |
| 403    | Forbidden    |
| 404    | Not Found    |


- 响应参数:


| 名称            | 类型   | 说明               | 是否必填 |
| --------------- | ------ | ------------------ | -------- |
| status          | int    | 响应码             | Y        |
| result          | json   | 返回信息           | Y        |
| txHash          | string | 部署合约的交易Hash | Y        |
| contractAddress | string | 合约地址           | Y        |
| msg             | string | 响应描述           | Y        |



- 响应示例:

```json
{
      "status": 200,
      "result": {
        "txHash": "0xdadad...454545",
        "contractAddress": "0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"
      },
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request POST 'http://datumtechs.com/api/v2/dataAsset/deployNFT' \
--header 'Content-Type: application/json' \
--data-raw '{
      "templeteId": 1,
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
    }'
```



### 关联原始数据和元数据

合约部署成功后，需要将合约地址和对应的原始数据与元数据关联起来，原始数据是指安全上链后返回的地址，元数据是已发布的；不同的原始数据由不同的合约进行管理。

**如何使用**


- 接口名称：`tokenCorrelateData`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：


| 名称            | 类型    | 说明                                                         | 是否必填 |
| --------------- | ------- | ------------------------------------------------------------ | -------- |
| contractAddress | address | 合约地址                                                     | Y        |
| option          | string  | 用户自定义的属性选项(json字段，包含已发布的元数据的metadataId或者直接包含原始数据的originId及原始数据的检索路径等信息) | Y        |
| desc            | string  | 描述信息                                                     | N        |
| user            | string  | 用户信息                                                     | Y        |
| userType        | int     | 用户类型                                                     | Y        |
| sign            | string  | 元数据的消息签名                                             | Y        |


- 请求参数示例：

```json
{
      "contractAddress": "0x....",
      "option": "{XXx}",
      "desc": "第一个合约",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}
```

- 响应状态:


| 状态码 | 说明         |
| ------ | ------------ |
| 200    | OK           |
| 201    | Created      |
| 401    | Unauthorized |
| 403    | Forbidden    |
| 404    | Not Found    |


- 响应参数:


| 名称   | 类型   | 说明                           | 是否必填 |
| ------ | ------ | ------------------------------ | -------- |
| status | int    | 响应码                         | Y        |
| result | json   | 返回信息                       | Y        |
| txHash | string | 关联原始数据和元数据的交易Hash | Y        |
| msg    | string | 响应描述                       | Y        |



- 响应示例:

```json
{
      "status": 200,
      "result": {
        "txHash": "0xdadad...454545"
     },
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request POST 'http://datumtechs.com/api/v2/dataAsset/tokenCorrelateData' \
--header 'Content-Type: application/json' \
--data-raw '{
      "templeteId": 1,
      "option": "{XXx}",
      "desc": "第一个合约",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}'
```



### 铸造Token

合约地址和对应的原始数据与元数据关联后，数据提供方则可以开始铸造Token，铸造好的Token即可在Dex上进行流通。

**如何使用**


- 接口名称：`mintToken`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：

| 名称            | 类型    | 说明                            | 是否必填 |
| --------------- | ------- | ------------------------------- | -------- |
| contractAddress | address | Token合约地址                   | Y        |
| chainId         | uint32  | 链id，默认为1，表示ethereum主网 | N        |
| property        | string  | Data Token属性描述，json格式    | Y        |



- 响应状态:


| 状态码 | 说明         |
| ------ | ------------ |
| 200    | OK           |
| 201    | Created      |
| 401    | Unauthorized |
| 403    | Forbidden    |
| 404    | Not Found    |


- 响应参数:


| 名称            | 类型      | 说明                      | 是否必填 |
| --------------- | --------- | ------------------------- | -------- |
| status          | int       | 响应码                    | Y        |
| result          | jsonArray | 用户部署好的Token合约列表 | Y        |
| transactionHash | string    | 交易Hash                  | Y        |
| msg             | string    | 响应描述                  | Y        |



- 响应示例:

```json
{
    "status": 200,
    "result": {
        "transactionHash": "0xxxxxxxxxxxxxxxxxxxx"
    },
    "msg": "OK"
}
```

- 使用示例

```shell
curl --request POST \
     --url 'http://datumtechs.com/api/v2/dataAsset/mintToken?contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId&property=$property' \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'X-API-Key: test'
```



### 销毁Token

用户可以自行销毁已经铸造的且未被交易使用的Data Token；或当用户持有的Token被使用后，如：下载原数据后，则需要被销毁；被销毁的Token即不可再被使用。

**如何使用**


- 接口名称：`burnToken`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：

| 名称            | 类型    | 说明                            | 是否必填 |
| --------------- | ------- | ------------------------------- | -------- |
| contractAddress | address | Token合约地址                   | Y        |
| chainId         | uint32  | 链id，默认为1，表示ethereum主网 | N        |
| tokenid         | string  | Data Token的id                  | Y        |



- 响应状态:


| 状态码 | 说明         |
| ------ | ------------ |
| 200    | OK           |
| 201    | Created      |
| 401    | Unauthorized |
| 403    | Forbidden    |
| 404    | Not Found    |


- 响应参数:


| 名称            | 类型      | 说明                    | 是否必填 |
| --------------- | --------- | ----------------------- | -------- |
| status          | int       | 响应码                  | Y        |
| result          | jsonArray | 用户部署好的NFT合约列表 | Y        |
| transactionHash | string    | 交易Hash                | Y        |
| msg             | string    | 响应描述                | Y        |



- 响应示例:

```json
{
    "status": 200,
    "result": {
        "transactionHash": "0xxxxxxxxxxxxxxxxxxxx"
    },
    "msg": "OK"
}
```

- 使用示例

```shell
curl --request POST \
     --url 'http://datumtechs.com/api/v2/dataAsset/burnToken?contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId&tokenid=$tokenid' \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'X-API-Key: test'
```



## NFT

Datum官网服务数据资产化还支持兼容ERC721、ERC1155的Data NFT协议；数据资产化流程包括：获取合约模板，部署合约，关联原始数据（地址）/对应元数据（已发布），铸造Token，销毁Token。

### 获取合约模板

通过调用api可以获取合约模板，合约模板兼容ERC721、ERC1155的Data NFT协议，该标准中包含了固定的接口和事件，如：铸造Token，销毁Token等。

**如何使用**


- 接口名称：`queryNFTContractTempleteList`

- 请求方式: `GET`

- 请求数据类型: 无

- 响应数据类型: `*/*`


- 请求参数：

无



- 响应状态:


| 状态码 | 说明         |
| ------ | ------------ |
| 200    | OK           |
| 201    | Created      |
| 401    | Unauthorized |
| 403    | Forbidden    |
| 404    | Not Found    |


- 响应参数:


| 名称            | 类型      | 说明                             | 是否必填 |
| --------------- | --------- | -------------------------------- | -------- |
| status          | int       | 响应码                           | Y        |
| result          | jsonArray | Datum内置的NFT合约模板列表       | Y        |
| templeteId      | int       | Datum内置的NFT合约模板Id         | Y        |
| templeteType    | int       | Datum内置的NFT合约模板的合约类型 | Y        |
| templeteContent | string    | Datum内置的NFT合约模板的合约内容 | Y        |
| msg             | string    | 响应描述                         | Y        |



- 响应示例:

```json
{
      "status": 200,
      "result": [
        {
            "templeteId": 1,
            "templeteType": 1,
            "templeteContent": "{xxx}" 
        }
      ],
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request GET 'http://datumtechs.com/api/v2/dataAsset/queryNFTContractTempleteList'
```



### 部署合约

数据提供方使用自己的钱包将获取的合约模板部署到指定的链，如：PlatON，Ethereum等，部署成功后返回合约地址。

**如何使用**


- 接口名称：`deployNFT`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：


| 名称       | 类型   | 说明       | 是否必填 |
| ---------- | ------ | ---------- | -------- |
| templeteId | string | 合约模板ID | Y        |
| user       | string | 用户信息   | Y        |
| userType   | int    | 用户类型   | Y        |


- 请求参数示例：

```json
{
      "templeteId": 1,
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1
}
```

- 响应状态:


| 状态码 | 说明         |
| ------ | ------------ |
| 200    | OK           |
| 201    | Created      |
| 401    | Unauthorized |
| 403    | Forbidden    |
| 404    | Not Found    |


- 响应参数:


| 名称            | 类型   | 说明               | 是否必填 |
| --------------- | ------ | ------------------ | -------- |
| status          | int    | 响应码             | Y        |
| result          | json   | 返回信息           | Y        |
| txHash          | string | 部署合约的交易Hash | Y        |
| contractAddress | string | 合约地址           | Y        |
| msg             | string | 响应描述           | Y        |



- 响应示例:

```json
{
      "status": 200,
      "result": {
        "txHash": "0xdadad...454545",
        "contractAddress": "0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"
      },
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request POST 'http://datumtechs.com/api/v2/dataAsset/deployNFT' \
--header 'Content-Type: application/json' \
--data-raw '{
      "templeteId": 1,
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
    }'
```



### 关联原始数据和元数据

合约部署成功后，需要将合约地址和对应的原始数据与元数据关联起来，原始数据是指安全上链后返回的地址，元数据是已发布的；不同的原始数据由不同的合约进行管理。

**如何使用**


- 接口名称：`nftCorrelateData`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：


| 名称            | 类型    | 说明                                                         | 是否必填 |
| --------------- | ------- | ------------------------------------------------------------ | -------- |
| contractAddress | address | 合约地址                                                     | Y        |
| option          | string  | 用户自定义的属性选项(json字段，包含已发布的元数据的metadataId或者直接包含原始数据的originId及原始数据的检索路径等信息) | Y        |
| desc            | string  | 描述信息                                                     | N        |
| user            | string  | 用户信息                                                     | Y        |
| userType        | int     | 用户类型                                                     | Y        |
| sign            | string  | 元数据的消息签名                                             | Y        |


- 请求参数示例：

```json
{
      "contractAddress": "0x....",
      "option": "{XXx}",
      "desc": "第一个合约",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}
```

- 响应状态:


| 状态码 | 说明         |
| ------ | ------------ |
| 200    | OK           |
| 201    | Created      |
| 401    | Unauthorized |
| 403    | Forbidden    |
| 404    | Not Found    |


- 响应参数:


| 名称   | 类型   | 说明                           | 是否必填 |
| ------ | ------ | ------------------------------ | -------- |
| status | int    | 响应码                         | Y        |
| result | json   | 返回信息                       | Y        |
| txHash | string | 关联原始数据和元数据的交易Hash | Y        |
| msg    | string | 响应描述                       | Y        |



- 响应示例:

```json
{
      "status": 200,
      "result": {
        "txHash": "0xdadad...454545"
     },
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request POST 'http://datumtechs.com/api/v2/dataAsset/nftCorrelateData' \
--header 'Content-Type: application/json' \
--data-raw '{
      "templeteId": 1,
      "option": "{XXx}",
      "desc": "第一个合约",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}'
```

### 铸造Token

合约地址和对应的原始数据与元数据关联后，数据提供方则可以开始铸造Token，铸造好的Token即可在NFT交易所上进行流通。

**如何使用**


- 接口名称：`mintNFT`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：

| 名称            | 类型    | 说明                            | 是否必填 |
| --------------- | ------- | ------------------------------- | -------- |
| contractAddress | address | NFT合约地址                     | Y        |
| chainId         | uint32  | 链id，默认为1，表示ethereum主网 | N        |
| property        | string  | Data Token属性描述，json格式    | Y        |

- 响应状态:


| 状态码 | 说明         |
| ------ | ------------ |
| 200    | OK           |
| 201    | Created      |
| 401    | Unauthorized |
| 403    | Forbidden    |
| 404    | Not Found    |


- 响应参数:


| 名称            | 类型      | 说明                    | 是否必填 |
| --------------- | --------- | ----------------------- | -------- |
| status          | int       | 响应码                  | Y        |
| result          | jsonArray | 用户部署好的NFT合约列表 | Y        |
| transactionHash | string    | 交易Hash                | Y        |
| msg             | string    | 响应描述                | Y        |

- 响应示例:

```json
{
    "status": 200,
    "result": {
        "transactionHash": "0xxxxxxxxxxxxxxxxxxxx"
    },
    "msg": "OK"
}
```

- 使用示例

```shell
curl --request POST \
     --url 'http://datumtechs.com/api/v2/dataAsset/mintNFT?contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId&property=$property' \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'X-API-Key: test'
```

### 销毁Token

用户可以自行销毁已经铸造的且未被交易使用的Data Token；或用户持有的Token被使用后，如：下载原数据后，则需要被销毁；被销毁的Token即不可再被使用。

**如何使用**


- 接口名称：`burnNFT`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：

| 名称            | 类型    | 说明                            | 是否必填 |
| --------------- | ------- | ------------------------------- | -------- |
| contractAddress | address | NFT合约地址                     | Y        |
| chainId         | uint32  | 链id，默认为1，表示ethereum主网 | N        |
| tokenid         | string  | Data Token的id                  | Y        |

- 响应状态:


| 状态码 | 说明         |
| ------ | ------------ |
| 200    | OK           |
| 201    | Created      |
| 401    | Unauthorized |
| 403    | Forbidden    |
| 404    | Not Found    |


- 响应参数:


| 名称            | 类型      | 说明                    | 是否必填 |
| --------------- | --------- | ----------------------- | -------- |
| status          | int       | 响应码                  | Y        |
| result          | jsonArray | 用户部署好的NFT合约列表 | Y        |
| transactionHash | string    | 交易Hash                | Y        |
| msg             | string    | 响应描述                | Y        |

- 响应示例:

```json
{
    "status": 200,
    "result": {
        "transactionHash": "0xxxxxxxxxxxxxxxxxxxx"
    },
    "msg": "OK"
}
```

- 使用示例

```shell
curl --request POST \
     --url 'http://datumtechs.com/api/v2/dataAsset/burnNFT?contractAddress="0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"&chainId=$chainId&tokenid=$tokenid' \
     --header 'Accept: application/json' \
     --header 'Content-Type: application/json' \
     --header 'X-API-Key: test'
```



## 交易所上架


为了方便用户一键发布数据资产，Datum提供了可自动上架到DEX或NFT交易平台的api接口，通过调用此api接口，可以将对应的token自动上架到DEX交易所，将NFT上架到NFT交易平台。

**如何使用**


- 接口名称：`exchangeListing`

- 请求方式: `POST`

- 请求数据类型: `application/json`

- 响应数据类型: `*/*`


- 请求参数：


|名称|类型|说明|是否必填|
|---|---|---|---|
|contract_address|string|NFT合约内容|Y|
|option|string|用户自定义的属性选项(json字段，包含已发布的元数据的metadataId或者直接包含原始数据的originId及原始数据的检索路径等信息)|Y|
|desc|string|描述信息|N|
|user|string|用户信息|Y|
|userType|int|用户类型|Y|
|sign|string|元数据的消息签名|Y|


- 请求参数示例：

```json
{
      "templeteId": 1,
      "option": "{XXx}",
      "desc": "第一个合约",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}
```



- 响应状态:


|状态码| 说明 |
|---|---|
|200|OK|
|201|Created|
|401|Unauthorized|
|403|Forbidden|
|404|Not Found|


- 响应参数:


|名称|类型|说明|是否必填|
|---|---|---|---|
|status|int|响应码|Y|
|result|json|返回信息|Y|
|msg|string|响应描述|Y|

- 响应示例:

```json
{
      "status": 200,
      "result": {
        "txHash": "0xdadad...454545",
        "contractAddress": "0x2cbb932fe93b84140d388501f399bbbe5825f473a9f13c437ac292c2b3693646"
      },
      "msg": "OK"
}
```


- 使用示例

```shell
curl --location --request POST 'http://datumtechs.com/api/v2/dataAsset/exchangeListing' \
--header 'Content-Type: application/json' \
--data-raw '{
      "templeteId": 1,
      "option": "{XXx}",
      "desc": "第一个合约",
      "user": "0x7e336d121679e9d741ab771992d5f32286f60d4a",
      "userType": 1,
      "sign": "77+9UCNp77+9QFhC77+977+9Ru+/ve+/vUhGEe+/ve+/ve+/ve+/vQbvv73vv70dfu+/vd+Ff++/vTXvv73vv71w77+977+93KTvv73vv70F77+9Nu+/vWhjbEXvv73vv73vv73vv71Z77+977+977+977+9Yu+/ve+/vQ3vv70c"
}'
```
